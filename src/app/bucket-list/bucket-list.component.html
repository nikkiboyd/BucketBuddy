<div class="top">
  <div class="bucketBox">
    <h1><b>{{(userFromDatabase | async)?.name}}'s Bucket List:</b></h1>
    <div id="newBucketItem">
      <h4>Add New Bucket Item</h4>
      <div class="form-group">
        <label for="title">Title:</label>
        <input class="form-control" type="text" name="title" #title>
      </div>
      <div class="form-group">
        <label for="">Category:</label>
        <select class="form-control" name="categories" #category>
          <option *ngFor = "let category of allCategories | unique" value="{{category}}" >{{category}}</option>
        </select>
      </div>
      <button type="button" class="btn btn-danger" name="button" (click)="saveNewBucketItem(title.value, category.value); title.value = ' '">Submit</button>
    </div>

    <div class="row align-center header">
      <div class="col-sm-3 align-left">
        <h4>BucketList Item Title</h4>
      </div>
      <div class="col-sm-2">
        <h4>Completed</h4>
      </div>
      <div class="col-sm-2">
        <h4>Category</h4>
      </div>
      <div class="col-sm-3">
        <h4>Timeline</h4>
      </div>
      <div class="col-sm-2">
        <h4>Delete</h4>
      </div>
    </div>
    <div *ngFor = "let bucketListItem of userBucketList | async | notCompleted" class="row notCompleted">
      <div class="col-sm-3">
        <div class="vertical-align">
          <div class="">
            <p id="item-title"><a routerLink="/bucketItems/{{bucketListItem.$key}}">{{bucketListItem.title}}</a></p>
            <img src="/assets/edit-icon.png" alt="edit" class="edit-icon" (click)="enableEditor(bucketListItem.$key)">
          </div>
          <div *ngIf="editor == bucketListItem.$key">
            <input class="form-control margin-top" type="text" name="newTitle" value="{{bucketListItem.title}}" #newTitle>
            <button class="btn btn-danger margin-top" (click)="editTitle(bucketListItem.$key, newTitle.value)" type="button" name="button">Save Edit</button>
          </div>
        </div>
      </div>
      <div class="col-sm-2 check">
        <div class="pretty p-icon p-round p-tada" *ngIf="bucketListItem.completeness == true">
              <input type="checkbox" [checked] = "bucketListItem.completeness == true" (change)="changeStatusToFalse(bucketListItem.title, true, bucketListItem.$key)"/>
              <div class="state p-primary-o">
                  <i class="fa fa-heart icon mdi mdi-heart" aria-hidden="true"></i>
                  <label></label>
              </div>
          </div>
        <div class="pretty p-icon p-round p-tada" *ngIf="bucketListItem.completeness == false">
              <input type="checkbox" (change)="changeStatusToTrue(bucketListItem.title, true, bucketListItem.$key)"/>
              <div class="state p-primary-o">
                  <i class="fa fa-heart icon mdi mdi-heart" aria-hidden="true"></i>
                  <label></label>
              </div>
          </div>
      </div>
      <div class="col-sm-2">
        <p class="vertical-align">{{bucketListItem.category}}</p>
      </div>
      <div class="col-sm-3">
        <p class="vertical-align">Date Added: {{bucketListItem.dateAdded | date:'short'}}</p>
        <p class="vertical-align">Completed: {{bucketListItem.dateCompleted}}</p>
      </div>
      <div class="col-sm-2">
        <p class="vertical-align"><button type="button" class="btn btn-danger" name="button" (click)="deleteBucketItem(bucketListItem.$key)">Delete</button></p>
      </div>
    </div>
    <div *ngFor = "let bucketListItem of userBucketList | async | Completed" class="row completed">
      <div class="col-sm-3">
        <div class="vertical-align">
          <p  id="item-title">{{bucketListItem.title}}</p>
        </div>
      </div>
      <div class="col-sm-2 check">
        <div class="pretty p-icon p-round p-tada" *ngIf="bucketListItem.completeness == true">
              <input type="checkbox" [checked] = "bucketListItem.completeness == true" (change)="changeStatusToFalse(bucketListItem.title, true, bucketListItem.$key)"/>
              <div class="state p-primary-o">
                  <i class="fa fa-heart icon mdi mdi-heart" aria-hidden="true"></i>
                  <label></label>
              </div>
          </div>
        <div class="pretty p-icon p-round p-tada" *ngIf="bucketListItem.completeness == false">
              <input type="checkbox" (change)="changeStatusToTrue(bucketListItem.title, true, bucketListItem.$key)"/>
              <div class="state p-primary-o">
                  <i class="fa fa-heart icon mdi mdi-heart" aria-hidden="true"></i>
                  <label></label>
              </div>
          </div>
      </div>
      <div class="col-sm-2">
        <p class="vertical-align">{{bucketListItem.category}}</p>
      </div>
      <div class="col-sm-3">
        <p class="vertical-align">Date Added: {{bucketListItem.dateAdded | date:'short'}}</p>
        <p class="vertical-align">Completed: {{bucketListItem.dateCompleted | date:'short'}}</p>
      </div>
      <div class="col-sm-2">
        <p class="vertical-align"><button type="button" class="btn btn-danger" name="button" (click)="deleteBucketItem(bucketListItem.$key)">Delete</button></p>
      </div>
    </div>
    </div>
</div>
